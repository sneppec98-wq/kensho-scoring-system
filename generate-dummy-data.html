<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generate Dummy Data Atlet</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-900 text-white p-8">
    <div class="max-w-2xl mx-auto">
        <h1 class="text-3xl font-bold mb-6">üéØ Generate Dummy Data Atlet</h1>

        <div class="bg-gray-800 p-6 rounded-lg mb-6">
            <label class="block mb-2 font-bold">Event ID:</label>
            <input type="text" id="eventId" placeholder="73PhwSG9qyLRGSxA5vwn"
                class="w-full px-4 py-2 bg-gray-700 rounded text-white mb-4">

            <label class="block mb-2 font-bold">Jumlah Dummy Data:</label>
            <input type="number" id="count" value="10" min="1" max="50"
                class="w-full px-4 py-2 bg-gray-700 rounded text-white mb-4">

            <button onclick="generateDummyData()"
                class="w-full bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg font-bold">
                GENERATE DUMMY DATA
            </button>
        </div>

        <div id="status" class="bg-gray-800 p-4 rounded-lg hidden">
            <h3 class="font-bold mb-2">Status:</h3>
            <div id="statusContent" class="text-sm"></div>
        </div>

        <div class="mt-6 bg-yellow-900/30 border border-yellow-600 p-4 rounded-lg">
            <h3 class="font-bold text-yellow-400">‚ö†Ô∏è Penting:</h3>
            <ul class="text-sm space-y-1 mt-2 text-yellow-200">
                <li>‚Ä¢ Data yang dibuat adalah data DUMMY untuk testing</li>
                <li>‚Ä¢ Event ID harus diisi dengan ID event yang valid</li>
                <li>‚Ä¢ Pastikan sudah login dan punya akses ke Firestore</li>
                <li>‚Ä¢ Data akan dibuat dengan nama unik</li>
            </ul>
        </div>
    </div>

    <script type="module">
        import { db } from './js/firebase-init.js';
        import { collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Dummy data pools
        const firstNames = [
            'ANDI', 'BUDI', 'CITRA', 'DEWI', 'EKO', 'FAJAR', 'GITA', 'HADI',
            'IKA', 'JOKO', 'KARTIKA', 'LINA', 'MUHAMMAD', 'NOVA', 'OKI', 'PUTRI',
            'QORI', 'RUDI', 'SARI', 'TONO', 'UMI', 'VINA', 'WAWAN', 'YANTO', 'ZAKI'
        ];

        const lastNames = [
            'PRATAMA', 'WIBOWO', 'SANTOSO', 'NUGROHO', 'SETIAWAN',
            'RAHARJO', 'SAPUTRA', 'SUSANTO', 'KURNIAWAN', 'HIDAYAT',
            'UTAMA', 'WIJAYA', 'PERMANA', 'SAPUTRI', 'AZZAHRA'
        ];

        const teams = [
            'KORAMIL MEJAYAN', 'PELATDA JAWA TIMUR', 'INKADO SURABAYA',
            'LEMKARI JAKARTA', 'PUSLATDA JAWA BARAT', 'INKANAS BANDUNG',
            'KORAMIL SURABAYA', 'PELATDA DKI JAKARTA', 'INKADO SEMARANG'
        ];

        const classes = [
            'KATA PERORANGAN USIA DINI PUTRA',
            'KATA PERORANGAN USIA DINI PUTRI',
            'KATA PERORANGAN JUNIOR PUTRA',
            'KATA PERORANGAN JUNIOR PUTRI',
            'KUMITE PERORANGAN - 45 KG PEMULA PUTRI',
            'KUMITE PERORANGAN - 45 KG CADET PUTRA',
            'KUMITE PERORANGAN + 70 KG CADET PUTRA',
            'KUMITE PERORANGAN - 35 KG PEMULA PUTRI'
        ];

        window.generateDummyData = async function () {
            const eventId = document.getElementById('eventId').value.trim();
            const count = parseInt(document.getElementById('count').value);

            if (!eventId) {
                alert('Event ID harus diisi!');
                return;
            }

            const statusDiv = document.getElementById('status');
            const statusContent = document.getElementById('statusContent');
            statusDiv.classList.remove('hidden');
            statusContent.innerHTML = '<p class="text-yellow-400">‚è≥ Generating data...</p>';

            try {
                const athletesRef = collection(db, `events/${eventId}/athletes`);
                let successCount = 0;

                for (let i = 0; i < count; i++) {
                    const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
                    const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
                    const name = `${firstName} ${lastName}`;
                    const team = teams[Math.floor(Math.random() * teams.length)];
                    const className = classes[Math.floor(Math.random() * classes.length)];
                    const gender = className.includes('PUTRI') ? 'Putri' : 'Putra';

                    // Random birth date between 2005-2015
                    const year = 2005 + Math.floor(Math.random() * 11);
                    const month = Math.floor(Math.random() * 12);
                    const day = 1 + Math.floor(Math.random() * 28);
                    const birthDate = new Date(year, month, day).toISOString().split('T')[0];

                    // Random weight between 25-75 kg
                    const weight = 25 + Math.floor(Math.random() * 51);

                    const athleteData = {
                        name: name,
                        team: team,
                        className: className,
                        gender: gender,
                        birthDate: birthDate,
                        weight: weight,
                        createdAt: new Date(),
                        updatedAt: new Date()
                    };

                    await addDoc(athletesRef, athleteData);
                    successCount++;

                    // Update status
                    statusContent.innerHTML = `<p class="text-blue-400">üìù Created: ${successCount}/${count}</p>`;
                }

                statusContent.innerHTML = `
                    <p class="text-green-400 font-bold">‚úÖ Success!</p>
                    <p class="text-sm mt-2">${successCount} data atlet dummy berhasil dibuat</p>
                    <p class="text-sm text-gray-400 mt-2">Refresh halaman event-detail untuk melihat data baru</p>
                `;

            } catch (error) {
                console.error('Error:', error);
                statusContent.innerHTML = `
                    <p class="text-red-400 font-bold">‚ùå Error!</p>
                    <p class="text-sm mt-2">${error.message}</p>
                `;
            }
        };
    </script>
</body>

</html>